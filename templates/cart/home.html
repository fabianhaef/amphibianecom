{% extends "base.html" %}
{% block content %}

<h1 id="title-h1">amphibian</h1>
<br>
<div class="container">
    <div class="row text-center">
        <div class="col-lg-12 text-center">
            <p>Welcome to amphibian. If you are looking for beats or sounds - you have come to the right place.</p>
        </div>
    </div>
</div>
<br>
<div class="container">
      <div class="row">
          {% for product in products %}
          {% if not product.is_soundkit %}
          <div class="col-lg-3 text-center">
              <img src="{{product.image.url}}" alt="beat-cover" class="img-fluid img-cover element-shadow img-audio">
              <a href="{{ product.get_absolute_url }}" >
                  <h3 id="title-link">{{ product.title }}</h3>
              </a>
              <br>
          </div>
          <script>


          function isPlaying(audelem) {
          return !audelem.paused;
          }
            var imgs = document.getElementsByClassName("img-audio");
            for (i = 0; i < imgs.length; i++) {
              imgs[i].addEventListener("click", function () {
                let audioFile = new Audio("{{product.file.url}}");
                if (isPlaying(audioFile)) {
                  audioFile.pause();
                } else {
                  audioFile.play();
                }
              });
            }
          </script>
          {% endif %}
          {% endfor %}
      </div>
    <div class="row">
        <div class="mx-auto">
            <a href="{% url 'cart:product-list' %}">
                <button class="btn btn-lg py-3 btn-block amphibian-button-primary discover-more element-shadow">
                    discover more
                </button>
                <br>
            </a>
        </div>
    </div>
</div>
{% endblock %}